<div class="mx-3 my-3 card">
    <div class="card-header background-card-header">
        <div class="card-title">
            <em class="fas fa-info-circle mr-3"> </em>
            <strong>
            {{ 'carpeta_ciudadana.request_info.financing.title' | translate }}
        </strong>
        </div>
    </div>
    <div class="card-body">
        <div class="form-group">
            <app-input-text-area [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                [isReadOnly]="readOnly"
                label="{{ 'carpeta_ciudadana.request_info.procedure_info.project_definition' | translate }}"
                controlName="project_definition" idValue="project_definition" nameValue="project_definition"
                [error]="validate && formLineaResistir.controls['project_definition']?.invalid" errorText="empty_error"
                [isRequired]="true" placeholder="{{ 'carpeta_ciudadana.placeholder.input' | translate }}" >
            </app-input-text-area>
        </div>
       
        <div class="d-flex w-100">
            <div class="form-group col-md-3">
                <app-input-select [form]="formLineaResistir" (change)="capturarCampo($event.target.value, 'pro')"
                    placeholder="{{ 'carpeta_ciudadana.placeholder.select' | translate }}"
                    label="{{ 'carpeta_ciudadana.request_info.procedure_info.project_type' | translate }}"
                    [error]="validate && formLineaResistir.controls['project_type']?.invalid"
                    controlName="project_type" idValue="project_type" nameValue="project_type" [isReadOnly]="readOnly"
                    [isRequired]="true" [fieldOptions]="project_type" errorText="empty_error"
                    [draft]="draftDetailCostFinanced">
                </app-input-select>
            </div> 
        </div>
            <div class="d-flex w-100">
            <span class="ml-3">
                <strong>{{ 'carpeta_ciudadana.request_info.ubication-proyect' | translate }}</strong>
            </span>
            </div>
            <div class="d-flex w-100">
            <div class="form-group col-md-3">
                <app-input-select [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                    [error]="validate && formLineaResistir.controls['social_country']?.invalid"
                    placeholder="{{ 'carpeta_ciudadana.instance.notification.selectCountry' | translate }}"
                    label=" {{ 'carpeta_ciudadana.instance.notification.country' | translate }}" (change)="onChangeCountry($event.target.value)"
                    controlName="social_country" idValue="social_country" nameValue="social_country" [isReadOnly]="readOnly"
                    [isRequired]="true" [fieldOptions]="paises" [errorText]="errorCharacterLeng">
                </app-input-select>
            </div>
            <div class="form-group col-md-2" *ngIf="countrySelected === countriesSpain">
                <app-input-select [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                    [error]="validate && formLineaResistir.controls['social_province']?.invalid"
                    placeholder="{{ 'carpeta_ciudadana.instance.notification.selectProvince' | translate }}"
                    label=" {{ 'carpeta_ciudadana.instance.notification.province' | translate }}"
                    controlName="social_province" idValue="social_province" nameValue="social_province" (change)="onChangeSpainCountry($event.target.value)"
                    [isReadOnly]="readOnly" [isRequired]="true" [fieldOptions]="provincias" [errorText]="errorCharacterLeng">
                </app-input-select>
            </div>
            <div class="form-group col-md-2" *ngIf="countrySelected === countriesSpain">
                <app-input-select [form]="formLineaResistir" [draft]="draftDetailCostFinanced" 
                    [error]="validate && formLineaResistir.controls['social_municipality']?.invalid"
                    placeholder="{{ 'carpeta_ciudadana.instance.notification.selectMunicipality' | translate }}"
                    label="{{ 'carpeta_ciudadana.instance.notification.municipality' | translate }}"
                    controlName="social_municipality" idValue="social_municipality" nameValue="social_municipality"
                    [isReadOnly]="readOnly" [isRequired]="true" [fieldOptions]="municipios" [errorText]="errorCharacterLeng">
                </app-input-select>
            </div>
            <div class="form-group col-md-2" *ngIf="countrySelected !== countriesSpain" >
                <app-input-text placeholder="{{ 'carpeta_ciudadana.placeholder.input' | translate }}" [draft]="draftDetailCostFinanced"
                [form]="formLineaResistir" label="{{ 'carpeta_ciudadana.identification.address.social_region' | translate }}" [isReadOnly]="readOnly"
                controlName="social_region" idValue="social_region" nameValue="social_region"></app-input-text>
            </div>
        </div>
        <!-- Inversion G1 -->
        <div [ngClass]="{ 'd-none': showInversion == false }">
            <span class="ml-3">
                <strong>{{ 'carpeta_ciudadana.request_info.financing.investment.title' | translate }}</strong>
            </span>
            <div class="row justify-content-start mx-0">
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir"
                        label="{{ 'carpeta_ciudadana.request_info.financing.investment.ground' | translate }}"
                        [error]="validate && formLineaResistir.controls['g1terrenos']?.invalid" [isReadOnly]="readOnly"
                        controlName="g1terrenos" idValue="g1terrenos" nameValue="g1terrenos" [isRequired]="showInversion"
                         [draft]="draftDetailCostFinanced" errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir"
                        label="{{ 'carpeta_ciudadana.request_info.financing.investment.properties' | translate }}"
                        controlName="g1inmuebles" idValue="g1inmuebles" nameValue="g1inmuebles" [draft]="draftDetailCostFinanced"
                        [error]="validate && formLineaResistir.controls['g1inmuebles']?.pristine" [isReadOnly]="readOnly"
                        [isRequired]="showInversion"  errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir"
                        label="{{ 'carpeta_ciudadana.request_info.financing.investment.machinery' | translate }}"
                        [error]="validate && formLineaResistir.controls['g1maquinaria']?.invalid" [draft]="draftDetailCostFinanced"
                        controlName="g1maquinaria" idValue="g1maquinaria" nameValue="g1maquinaria" [isRequired]="showInversion" [isReadOnly]="readOnly"
                         errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.investment.installation' | translate }}"
                        [error]="validate && formLineaResistir.controls['g1instalaciones']?.invalid" [isReadOnly]="readOnly"
                        controlName="g1instalaciones" idValue="g1instalaciones" nameValue="g1instalaciones" [draft]="draftDetailCostFinanced"
                        [isRequired]="showInversion"  errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.investment.others' | translate }}"
                        controlName="g1otros" idValue="g1otros" nameValue="g1otros" [isRequired]="false" [isReadOnly]="readOnly"
                        ></app-input-number>
                </div>
            </div>
            <hr>
            <span class="ml-3">
                <strong>{{ 'carpeta_ciudadana.request_info.financing.financing_fixed.title' | translate }}</strong>
            </span>
            <div class="row justify-content-start mx-0">
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_fixed.own_resources' | translate }}"
                        controlName="recursosPropios" idValue="recursosPropios" nameValue="recursosPropios"
                        [error]="validate && formLineaResistir.controls['recursosPropios']?.invalid" [isReadOnly]="readOnly"
                        [isRequired]="showInversion"  errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_fixed.grants' | translate }}"
                        [error]="validate && formLineaResistir.controls['subvenciones']?.invalid" [isReadOnly]="readOnly"
                        controlName="subvenciones" idValue="subvenciones" nameValue="subvenciones" [isRequired]="showInversion" 
                        errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_fixed.other_bank_financing' | translate }}"
                        controlName="otraFinBancaria" idValue="otraFinBancaria" [isReadOnly]="readOnly"
                        nameValue="otraFinBancaria" [isRequired]="false">
                    </app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <i class="fas fa-info-circle icon-float" (click)="openDialog()" [ngClass]="{ 'd-none': showInformationPopUp==false }"></i>
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_fixed.active_ivf' | translate }}"
                        [error]="validate && formLineaResistir.controls['activoIVF']?.invalid"
                        controlName="activoIVF" idValue="activoIVF" nameValue="activoIVF" [isReadOnly]="readOnly"
                        [isRequired]="showInversion"  errorText="empty_error"></app-input-number>
                </div>
            </div>
        </div>
        <!-- circulante G2-->
        <div [ngClass]="{ 'd-none': showCirculante == false }">
            <hr>
            <div class="row col-sm-12">
                <span class="ml-3">
                    <strong>{{ 'carpeta_ciudadana.request_info.financing.financing_assets.title' | translate
                        }}</strong>
                </span>
                <span class="m-3">
                    {{ 'carpeta_ciudadana.linea_resistir_instance.text_1' | translate }}
                </span>
            </div>
            <div class="row justify-content-start mx-0">
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_assets.current_assets' | translate }}"
                        [error]="validate && formLineaResistir.controls['g2importeFinanciarCirculante']?.invalid"
                        controlName="g2importeFinanciarCirculante" idValue="g2importeFinanciarCirculante" nameValue="g2importeFinanciarCirculante"
                        [isRequired]="showCirculante"  errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_assets.bankalbe_current_assets' | translate }}"
                        [error]="validate && formLineaResistir.controls['g2financiacionIVF']?.invalid"
                        controlName="g2financiacionIVF" idValue="g2financiacionIVF"
                        nameValue="g2financiacionIVF" [isRequired]="showCirculante" 
                        errorText="empty_error"></app-input-number>
                </div>
            </div>
        </div>
        <!-- Financiaci�n solicitada G3-->
        <hr>
        <div [ngClass]="{ 'd-none': pro != 'linea-resistir-project-type-G3-investment-and-circulating' }">
            <div class="row col-sm-12">
                <span class="ml-3">
                    <strong>{{ 'carpeta_ciudadana.request_info.financing.financing_requested.title' | translate
                        }}</strong>
                </span>
            </div>
            <div class="row justify-content-start mx-0">
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_requested.g1' | translate }}"
                        [error]="validate && formLineaResistir.controls['g3inversionActivosFijos']?.invalid"
                        controlName="g3inversionActivosFijos" idValue="g3inversionActivosFijos" nameValue="g3inversionActivosFijos"
                        [isRequired]="showInversion && showCirculante" errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced" 
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_requested.g2' | translate }}"
                        [error]="validate && formLineaResistir.controls['g3inversionActivoCirculante']?.invalid"
                        controlName="g3inversionActivoCirculante" idValue="g3inversionActivoCirculante"
                        nameValue="g3inversionActivoCirculante" [isRequired]="showInversion && showCirculante"
                        errorText="empty_error"></app-input-number>
                </div>
                <div class="form-group col-md-3">
                    <app-input-number [form]="formLineaResistir" [draft]="draftDetailCostFinanced"
                        label="{{ 'carpeta_ciudadana.request_info.financing.financing_requested.total_loan' | translate }}"
                        [error]="validate && formLineaResistir.controls['g3totalPrestamo']?.invalid"
                        controlName="g3totalPrestamo" idValue="g3totalPrestamo"
                        nameValue="g3totalPrestamo" [isRequired]="showInversion && showCirculante" 
                        errorText="empty_error"></app-input-number>
                </div>
            </div>
        </div>
    </div>
</div>